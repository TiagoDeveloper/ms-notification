version: '3.8'
services: 
    rabbitmq:
        image: rabbitmq:management
        ports:
        - "5672:5672"
        - "15672:15672"
        volumes: 
            - rabbitmq:/var/lib/rabbitmq
        restart: always
        environment: 
            - RABBITMQ_DEFAULT_USER=guest
            - RABBITMQ_DEFAULT_PASS=guest
    postgres:
      image: postgres:13
      ports:
        - 5432:5432
      volumes:
        - postgres:/var/lib/postgresql/data
      restart: always
      environment:
        POSTGRES_PASSWORD: postgres
    ms-assinaturas:
        profiles: ["hml"]
        build: .
        depends_on: 
          - postgres
          - rabbitmq
        ports:
        - 8080:8080
volumes: 
    rabbitmq:
    postgres: